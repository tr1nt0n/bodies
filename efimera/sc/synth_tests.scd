n = ServerOptions.new;

n.memSize = 16384;


(
// Synthesizer III
SynthDef(
	\synth_III, { | out, freq, dur, gate = 1 pan = 0 |
		var env = Linen.kr(
			gate,
			attackTime: 0.01,
			susLevel: 0.9,
			releaseTime: dur,
			doneAction: Done.freeSelf,
		);

		var pluck = DynKlank.ar(
			`[[freq], nil, [1]],
			Impulse.ar(
				freq: Logistic.ar(
				chaosParam: 3.57,
				freq: freq,
				init: dur * 2
				)
			),
			decayscale: dur
		);

		var sin = PMOsc.ar(
			carfreq: freq * do({ [ 9, 13, 17, ].choose }),
			modfreq: freq * do({ [ 3, 5, 7, ].choose }),
			pmindex: 0.4,
			modphase: 1,
			mul: 1/150
		);

		var conv = Convolution.ar(
			in: pluck,
			kernel: sin,
			framesize: 1024,
		);

		var output = Limiter.ar(
			in: conv,
			level: 1,
			dur: 0.01,
		);

		OffsetOut.ar(out, Pan2.ar(output, pan, env) );
	}
).add;
)

Pbind(
			 \instrument, \synth_III, \freq, Pseq(
				[
					[
						Rest(),
					],
					[
						Rest(),
					],
					[
						261.6255653005986 * 8/5,
					],
					[
						261.6255653005986 * 9/8,
					],
					[
						261.6255653005986 * 9/5,
					],
					[
						Rest(),
					],
					[
						261.6255653005986 * 10/9,
					],
					[
						261.6255653005986 * 50/27,
					],
					[
						Rest(),
					],
					[
						261.6255653005986 * 8/5,
					],
					[
						261.6255653005986 * 9/8,
					],
					[
						261.6255653005986 * 10/9,
					],
					[
						Rest(),
					],
					[
						261.6255653005986 * 50/27,
					],
					[
						261.6255653005986 * 9/8,
					],
					[
						261.6255653005986 * 8/5,
					],
					[
						Rest(),
					],
					[
						261.6255653005986 * 10/9,
					],
					[
						261.6255653005986 * 9/5,
					],
					[
						261.6255653005986 * 9/8,
					],
					[
						Rest(),
					],
					[
						261.6255653005986 * 10/9,
					],
					[
						261.6255653005986 * 9/8,
					],
					[
						261.6255653005986 * 10/9,
					],
					[
						Rest(),
					],
					[
						Rest(),
					],
					[
						261.6255653005986 * 8/5,
					],
					[
						261.6255653005986 * 9/8,
					],
					[
						261.6255653005986 * 10/9,
					],
					[
						Rest(),
					],
					[
						261.6255653005986 * 9/8,
					],
					[
						261.6255653005986 * 9/5,
					],
					[
						261.6255653005986 * 10/9,
					],
					[
						Rest(),
					],
					[
						261.6255653005986 * 9/8,
					],
					[
						261.6255653005986 * 10/9,
					],
					[
						Rest(),
					],
					[
						Rest(),
					],
					[
						Rest(),
					],
					[
						261.6255653005986 * 9/8,
					],
					[
						261.6255653005986 * 10/9,
					],
					[
						261.6255653005986 * 8/5,
					],
					[
						Rest(),
					],
					[
						261.6255653005986 * 9/5,
					],
					[
						261.6255653005986 * 9/8,
					],
					[
						Rest(),
					],
					[
						Rest(),
					],
					[
						261.6255653005986 * 8/5,
					],
					[
						261.6255653005986 * 9/8,
					],
					[
						261.6255653005986 * 9/5,
					],
					[
						Rest(),
					],
					[
						261.6255653005986 * 10/9,
					],
					[
						261.6255653005986 * 9/8,
					],
					[
						261.6255653005986 * 50/27,
					],
					[
						Rest(),
					],
					[
						261.6255653005986 * 8/5,
					],
					[
						261.6255653005986 * 10/9,
					],
					[
						261.6255653005986 * 9/8,
					],
					[
						Rest(),
					],
					[
						261.6255653005986 * 10/9,
					],
					[
						261.6255653005986 * 50/27,
					],
					[
						261.6255653005986 * 9/8,
					],
					[
						Rest(),
					],
					[
						Rest(),
					],
				],
			),
			\dur, Pseq(
				[
					4 * 60/41,
					2/9 * 60/41,
					4/9 * 60/41,
					2/9 * 60/41,
					4/9 * 60/41,
					2/9 * 60/41,
					2/9 * 60/41,
					35/36 * 60/41,
					1/4 * 60/41,
					3/4 * 60/41,
					1/4 * 60/41,
					1/7 * 60/41,
					1/7 * 60/41,
					2/7 * 60/41,
					1/7 * 60/41,
					2/7 * 60/41,
					3/13 * 60/41,
					3/13 * 60/41,
					12/13 * 60/41,
					3/13 * 60/41,
					9/13 * 60/41,
					3/13 * 60/41,
					3/13 * 60/41,
					3/13 * 60/41,
					1 * 60/41,
					2/9 * 60/41,
					4/9 * 60/41,
					2/9 * 60/41,
					2/9 * 60/41,
					8/9 * 60/41,
					1/4 * 60/41,
					3/4 * 60/41,
					1/4 * 60/41,
					1/4 * 60/41,
					1/4 * 60/41,
					1/4 * 60/41,
					5/4 * 60/41,
					2 * 60/41,
					4/9 * 60/41,
					2/9 * 60/41,
					2/9 * 60/41,
					8/9 * 60/41,
					2/9 * 60/41,
					3/4 * 60/41,
					1/4 * 60/41,
					4 * 60/41,
					2/9 * 60/41,
					8/9 * 60/41,
					2/9 * 60/41,
					2/3 * 60/41,
					1/4 * 60/41,
					1/4 * 60/41,
					1/4 * 60/41,
					1/2 * 60/41,
					1/4 * 60/41,
					1/2 * 60/41,
					1/7 * 60/41,
					1/7 * 60/41,
					4/7 * 60/41,
					1/7 * 60/41,
					7/12 * 60/41,
					7/36 * 60/41,
					7/72 * 60/41,
					3 * 60/41,
				]
			,1),
			\amp, 0.2,
			\legato, 1,
		).play;